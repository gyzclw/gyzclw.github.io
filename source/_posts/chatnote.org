#+TITLE: chatnote
#+AUTHOR: gyzclw
#+DATE: <2017-02-19 Sun>
#+TAGS: chatnote
#+LAYOUT: post
#+CATEGORIES: 笔记
* 资料
** WhatsApp 通信协议
 WhatesApp服务器池使用了SSL Socket, 在客户端重新连接对消息进行检索之,所有消息都会
 在服务器上排队。消息的成功检索会发回给WhatsApp服务器，它将会被重新转发给原始发送者
 一旦客户端成功接收消息，它就会在服务器存储中擦除。
* 思路
** 服务端
   客户端发送消息到服务器，服务器接收消息，检查对方是否在线，这时候存在两种情况
   1. 在线，将消息推送到客户端
   2. 不在线，保存消息到数据库，当客户端上线，将消息推送到客户端。
** 客户端
   保持在线，检查服务端消息。用户上线检查服务器是否有消息，有消息展现消息。
