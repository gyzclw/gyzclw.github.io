{"md5":"05382453a22b15d327c7aabe338bc484","content":"\n\n<div id=\"outline-container-sec-1\" class=\"outline-2\">\n<h2 id=\"sec-1\"><span class=\"section-number-2\">1</span> 资料</h2>\n<div class=\"outline-text-2\" id=\"text-1\">\n</div><div id=\"outline-container-sec-1-1\" class=\"outline-3\">\n<h3 id=\"sec-1-1\"><span class=\"section-number-3\">1.1</span> WhatsApp 通信协议</h3>\n<div class=\"outline-text-3\" id=\"text-1-1\">\n<p>\nWhatesApp服务器池使用了SSL Socket, 在客户端重新连接对消息进行检索之,所有消息都会\n在服务器上排队。消息的成功检索会发回给WhatsApp服务器，它将会被重新转发给原始发送者\n一旦客户端成功接收消息，它就会在服务器存储中擦除。\n</p>\n</div>\n</div>\n</div>\n<div id=\"outline-container-sec-2\" class=\"outline-2\">\n<h2 id=\"sec-2\"><span class=\"section-number-2\">2</span> 思路</h2>\n<div class=\"outline-text-2\" id=\"text-2\">\n</div><div id=\"outline-container-sec-2-1\" class=\"outline-3\">\n<h3 id=\"sec-2-1\"><span class=\"section-number-3\">2.1</span> 服务端</h3>\n<div class=\"outline-text-3\" id=\"text-2-1\">\n<p>\n客户端发送消息到服务器，服务器接收消息，检查对方是否在线，这时候存在两种情况\n</p>\n<ol class=\"org-ol\">\n<li>在线，将消息推送到客户端\n</li>\n<li>不在线，保存消息到数据库，当客户端上线，将消息推送到客户端。\n</li>\n</ol>\n</div>\n</div>\n<div id=\"outline-container-sec-2-2\" class=\"outline-3\">\n<h3 id=\"sec-2-2\"><span class=\"section-number-3\">2.2</span> 客户端</h3>\n<div class=\"outline-text-3\" id=\"text-2-2\">\n<p>\n保持在线，检查服务端消息。用户上线检查服务器是否有消息，有消息展现消息。\n</p>\n</div>\n</div>\n</div>\n\nLast Updated 2017-02-19 Sun 19:23.<br>Render by <a href=\"https://github.com/CodeFalling/hexo-renderer-org\">hexo-renderer-org</a> with <a href=\"http://www.gnu.org/software/emacs/\">Emacs</a> 25.1.1 (<a href=\"http://orgmode.org\">Org</a> mode 8.2.10)\n"}
